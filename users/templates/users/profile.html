{% extends 'core/base.html'%}
{% load static %}
{% block content %}

<div class="border_top pt-3" style="padding: 20px;text-align: right;">
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message}}
    </div>
    {% endfor %}
    {% endif %}

</div>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!------ Include the above in your HEAD tag ---------->

    <div class="container emp-profile">
        <form method="post">
            <div class="row">
                <div class="col-md-2">
                    <div class="profile-img">
                        <img style="max-width: 12rem;"
                            src="{% static 'core/images/profile.png' %}"
                            />
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="profile-head">
                        <h5>
                            {{user.username}}
                        </h5>
                        <h6>
                            {{user.email}}
                        </h6>
                        <p class="proile-rating">RANKINGS : <span>10/10</span></p>
                        <ul class="nav nav-tabs" id="myTab" role="tablist" style="width: 55rem;">
                            <li class="nav-item">
                                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab"
                                    aria-controls="home" aria-selected="true">مواعيدي</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
                                    aria-controls="profile" aria-selected="false">معلوماتي</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                </div>

                <div class="col-md-3">
                    <div class="tab-content profile-tab" id="myTabContent">

                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab"
                            style="text-align: right;font-weight:500;width:49rem;">

                            <table class="table table-hover" style="text-align: right;">
                                <thead>
                                    <tr>
                                        <th scope="col">اسم المريض</th>
                                        <th scope="col">تاريخ الموعد</th>
                                        <th scope="col">الخدمة</th>
                                        <th scope="col">الحالة</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for appointment in appointments%}
                                    <tr>
                                        <td>{{appointment.first_name}} {{appointment.last_name}}</td>
                                        <td>{{ appointment.date }} ({{appointment.time}})</td>
                                        <td>{{ appointment.service }}</td>
                                        <td>{% if appointment.status == False %}محتجزة
                                            {% else %}مكتملة 
                                            {% endif %}
                                        </td>
                                        <td>
                                            <div style="text-align: left;">
                                            <a href="{% url 'view_appointment' appointment.id %}" class="btn btn-outline-success " role="button"
                                                aria-pressed="true">استخراج</a>
                                            <a href="{% url 'delete_appointment' appointment.id %}" class="btn btn-outline-danger " role="button"
                                                aria-pressed="true">حذف</a>

                                            <div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab"
                            style="text-align: right;font-weight: 900;width: 43rem;">
                            {% if user.profile %}
                            <div class="row">
                                <div class="col-md-6">
                                    <label>اسم المستخدم</label>
                                </div>
                                <div class="col-md-6">
                                    <p>{{user.username}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>الاسم الكامل</label>
                                </div>
                                <div class="col-md-6">
                                    <p>{{user.profile.first_name}} {{user.profile.last_name}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>الهاتف</label>
                                </div>
                                <div class="col-md-6">
                                    <p>0{{user.profile.phone}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>العنوان</label>
                                </div>
                                <div class="col-md-6">
                                    <p>{{user.profile.address}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>الجنس</label>
                                </div>
                                <div class="col-md-6">
                                    <p>{{user.profile.sex}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>تاريخ الميلاد</label>
                                </div>
                                <div class="col-md-6">
                                    <p>{{user.profile.date_of_birth}}</p>
                                </div>
                            </div>
                            {% else %}
                            <h3>لم تقم بتحديث معلوماتك بعد!</h3>
                            <h4>اضف معلوماتك <a href="{% url 'add_info' %}">هنا</a> </h4>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
    </div>
</div>

</form>
</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<hr>
{% endblock content%}